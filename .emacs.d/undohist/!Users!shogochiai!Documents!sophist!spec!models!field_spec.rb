
((digest . "025e7d173efd191ba7bbccaedfdb42aa") (undo-list (#("
" 0 1 (fontified t)) . -426) (t 21328 1583 0 0) ((marker) . -1) ((marker) . -1) nil (#("  describe '#change_name_to' do
    let(:tag){ create :tag, name: 'tag_name' }
    let(:new_name){ 'new_tag_name' }
    let(:tags_video){ create :tags_video, tag: tag }
    let(:video){ tags_video.video }
    let(:method){ tag.change_name_to new_name }

    before do
      video
    end

    context '新ネームと同名タグがない場合' do
      it 'tag.nameを更新すること' do
        method
        tag.name.should == new_name
      end

      it 'tagの数が増減しないこと' do
        lambda do
          method
        end.should_not change(Tag, :count)
      end
    end

    context '新ネームと同名タグがある場合' do
      let(:existing_tag){ create :tag, name: new_name }

      before do
        existing_tag
      end

      it '同名タグをvideoに紐付けること' do
        method
        existing_tag.videos.should include video
      end

      it 'tagを1件削除すること' do
        lambda do
          method
        end.should change(Tag, :count).by -1
      end
    end
  end
" 0 11 (fontified t) 11 28 (fontified t face font-lock-string-face) 28 29 (fontified t) 29 30 (fontified t face font-lock-keyword-face) 30 31 (fontified t syntax-table nil face font-lock-keyword-face) 31 40 (fontified t) 40 44 (fontified t face font-lock-constant-face) 44 54 (fontified t) 54 58 (fontified t face font-lock-constant-face) 58 66 (fontified t) 66 76 (fontified t face font-lock-string-face) 76 77 (fontified t) 77 78 (fontified t syntax-table nil) 78 87 (fontified t) 87 96 (fontified t face font-lock-constant-face) 96 99 (fontified t) 99 113 (fontified t face font-lock-string-face) 113 114 (fontified t) 114 115 (fontified t syntax-table nil) 115 124 (fontified t) 124 135 (fontified t face font-lock-constant-face) 135 145 (fontified t) 145 156 (fontified t face font-lock-constant-face) 156 167 (fontified t) 167 168 (fontified t syntax-table nil) 168 177 (fontified t) 177 183 (fontified t face font-lock-constant-face) 183 203 (fontified t) 203 204 (fontified t syntax-table nil) 204 205 (fontified t) 205 213 (fontified t) 213 220 (fontified t face font-lock-constant-face) 220 251 (fontified t) 251 252 (fontified t syntax-table nil) 252 253 (fontified t) 253 265 (fontified t) 265 266 (fontified t face font-lock-keyword-face) 266 267 (fontified t syntax-table nil face font-lock-keyword-face) 267 268 (fontified t) 268 278 (fontified t) 278 279 (fontified t syntax-table nil) 279 284 (fontified t) 284 286 (fontified t face font-lock-keyword-face) 286 287 (fontified t syntax-table nil face font-lock-keyword-face) 287 301 (fontified t) 301 317 (fontified t face font-lock-string-face) 317 318 (fontified t) 318 319 (fontified t face font-lock-keyword-face) 319 320 (fontified t syntax-table nil face font-lock-keyword-face) 320 321 (fontified t) 321 330 (fontified t) 330 347 (fontified t face font-lock-string-face) 347 348 (fontified t) 348 349 (fontified t face font-lock-keyword-face) 349 350 (fontified t syntax-table nil face font-lock-keyword-face) 350 364 (fontified t) 364 365 (fontified t syntax-table nil) 365 366 (fontified t) 366 400 (fontified t) 400 401 (fontified t syntax-table nil) 401 402 (fontified t) 402 408 (fontified t) 408 410 (fontified t face font-lock-keyword-face) 410 411 (fontified t syntax-table nil face font-lock-keyword-face) 411 422 (fontified t) 422 437 (fontified t face font-lock-string-face) 437 438 (fontified t) 438 439 (fontified t face font-lock-keyword-face) 439 440 (fontified t syntax-table nil face font-lock-keyword-face) 440 441 (fontified t) 441 456 (fontified t) 456 457 (fontified t face font-lock-keyword-face) 457 458 (fontified t syntax-table nil face font-lock-keyword-face) 458 474 (fontified t) 474 475 (fontified t syntax-table nil) 475 476 (fontified t) 476 484 (fontified t) 484 487 (fontified t face font-lock-keyword-face) 487 506 (fontified t) 506 509 (fontified t face font-lock-type-face) 509 511 (fontified t) 511 517 (fontified t face font-lock-constant-face) 517 518 (fontified t syntax-table nil) 518 519 (fontified t) 519 525 (fontified t) 525 527 (fontified t face font-lock-keyword-face) 527 528 (fontified t syntax-table nil face font-lock-keyword-face) 528 533 (fontified t) 533 535 (fontified t face font-lock-keyword-face) 535 536 (fontified t syntax-table nil face font-lock-keyword-face) 536 550 (fontified t) 550 566 (fontified t face font-lock-string-face) 566 567 (fontified t) 567 568 (fontified t face font-lock-keyword-face) 568 569 (fontified t syntax-table nil face font-lock-keyword-face) 569 580 (fontified t) 580 593 (fontified t face font-lock-constant-face) 593 603 (fontified t) 603 607 (fontified t face font-lock-constant-face) 607 624 (fontified t) 624 625 (fontified t syntax-table nil) 625 640 (fontified t) 640 641 (fontified t face font-lock-keyword-face) 641 642 (fontified t syntax-table nil face font-lock-keyword-face) 642 662 (fontified t) 662 663 (fontified t syntax-table nil) 663 670 (fontified t) 670 672 (fontified t face font-lock-keyword-face) 672 673 (fontified t syntax-table nil face font-lock-keyword-face) 673 684 (fontified t) 684 703 (fontified t face font-lock-string-face) 703 704 (fontified t) 704 705 (fontified t face font-lock-keyword-face) 705 706 (fontified t syntax-table nil face font-lock-keyword-face) 706 707 (fontified t) 707 720 (fontified t) 720 721 (fontified t syntax-table nil) 721 769 (fontified t) 769 770 (fontified t syntax-table nil) 770 771 (fontified t) 771 777 (fontified t) 777 779 (fontified t face font-lock-keyword-face) 779 780 (fontified t syntax-table nil face font-lock-keyword-face) 780 791 (fontified t) 791 805 (fontified t face font-lock-string-face) 805 806 (fontified t) 806 807 (fontified t face font-lock-keyword-face) 807 808 (fontified t syntax-table nil face font-lock-keyword-face) 808 824 (fontified t) 824 825 (fontified t face font-lock-keyword-face) 825 826 (fontified t syntax-table nil face font-lock-keyword-face) 826 827 (fontified t) 827 842 (fontified t) 842 843 (fontified t syntax-table nil) 843 852 (fontified t) 852 855 (fontified t face font-lock-keyword-face) 855 870 (fontified t) 870 873 (fontified t face font-lock-type-face) 873 875 (fontified t) 875 881 (fontified t face font-lock-constant-face) 881 887 (fontified t) 887 888 (fontified t syntax-table nil) 888 889 (fontified t) 889 895 (fontified t) 895 897 (fontified t face font-lock-keyword-face) 897 898 (fontified t syntax-table nil face font-lock-keyword-face) 898 903 (fontified t) 903 905 (fontified t face font-lock-keyword-face) 905 906 (fontified t syntax-table nil face font-lock-keyword-face) 906 909 (fontified t) 909 911 (fontified t face font-lock-keyword-face) 911 912 (fontified t syntax-table nil face font-lock-keyword-face) 912 913 (fontified t)) . -428) (t 21328 1566 0 0) ((marker . 427) . -626) ((marker) . -844) ((marker) . -844) ((marker) . -827) ((marker) . -827) ((marker) . -889) ((marker) . -889) ((marker) . -899) ((marker) . -899) ((marker) . -907) ((marker) . -907) ((marker) . -809) ((marker) . -809) ((marker) . -782) ((marker) . -782) ((marker) . -771) ((marker) . -771) ((marker) . -781) ((marker) . -781) ((marker . 184) . -913) ((marker . 184) . -913) ((marker . 427) . -441) ((marker . 427) . -569) ((marker . 184) . -722) ((marker) . -722) ((marker) . -722) nil (#(".dependent :destroy" 0 1 (fontified t) 1 2 (fontified t) 2 3 (fontified t) 3 4 (fontified t) 4 5 (fontified t) 5 7 (fontified t) 7 8 (fontified t) 8 9 (fontified t) 9 10 (fontified t) 10 11 (fontified t) 11 12 (fontified t face font-lock-constant-face) 12 13 (fontified t face font-lock-constant-face) 13 14 (fontified t face font-lock-constant-face) 14 15 (fontified t face font-lock-constant-face) 15 16 (fontified t face font-lock-constant-face) 16 17 (fontified t face font-lock-constant-face) 17 18 (fontified t face font-lock-constant-face) 18 19 (fontified t syntax-table nil face font-lock-constant-face)) . 282) (t 21328 1543 0 0) ((marker . 427) . -19) ((marker . 282) . -1) ((marker . 282) . -1) ((marker . 282) . -19) nil (293 . 301) (t 21328 1541 0 0) nil (292 . 293) (t 21328 1537 0 0) nil (283 . 292) nil (#("t" 0 1 (fontified t syntax-table nil)) . -283) ((marker . 282) . -1) ((marker . 282) . -1) nil (#("h" 0 1 (fontified t syntax-table nil)) . -284) ((marker . 282) . -1) ((marker . 282) . -1) nil (#("r" 0 1 (fontified t syntax-table nil)) . -285) ((marker . 282) . -1) ((marker . 282) . -1) nil (#("o" 0 1 (fontified t syntax-table nil)) . -286) ((marker . 282) . -1) ((marker . 282) . -1) nil (#("u" 0 1 (fontified t syntax-table nil)) . -287) ((marker . 282) . -1) ((marker . 282) . -1) nil (#("g" 0 1 (fontified t syntax-table nil)) . -288) ((marker . 282) . -1) ((marker . 282) . -1) nil (#("h" 0 1 (fontified t syntax-table nil)) . -289) ((marker . 282) . -1) ((marker . 282) . -1) nil (#(" " 0 1 (fontified t syntax-table nil face (my-face-spc-at-eol))) . -290) ((marker . 282) . -1) ((marker . 282) . -1) nil (#(":" 0 1 (fontified t syntax-table nil)) . -291) ((marker . 282) . -1) ((marker . 282) . -1) nil (#("f" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -292) ((marker . 282) . -1) nil (#("i" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -293) ((marker . 282) . -1) nil (#("e" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -294) ((marker . 282) . -1) nil (#("l" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -295) ((marker . 282) . -1) nil (#("d" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -296) ((marker . 282) . -1) nil (#("s" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -297) ((marker . 282) . -1) nil (#("_" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -298) ((marker . 282) . -1) nil (#("t" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -299) ((marker . 282) . -1) nil (#("o" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -300) ((marker . 282) . -1) nil (#("p" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -301) ((marker . 282) . -1) nil (#("i" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -302) ((marker . 282) . -1) nil (#("c" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -303) ((marker . 282) . -1) nil (#("s" 0 1 (rear-nonsticky t fontified t syntax-table nil face font-lock-constant-face)) . -304) (t 21328 1517 0 0) ((marker . 282) . -1) nil (nil fontified nil 280 . 281) (nil fontified nil 268 . 280) (268 . 281) nil (#("t" 0 1 (fontified t face font-lock-constant-face)) . -268) nil (#("o" 0 1 (fontified t face font-lock-constant-face)) . -269) nil (#("p" 0 1 (fontified t face font-lock-constant-face)) . -270) nil (#("i" 0 1 (fontified t face font-lock-constant-face)) . -271) nil (#("c" 0 1 (fontified t face font-lock-constant-face)) . -272) nil (#("s" 0 1 (rear-nonsticky t fontified t face font-lock-constant-face)) . -273) (t 21328 1499 0 0) nil (#("
" 0 1 (fontified t)) . -313) nil (#(" " 0 1 (fontified t syntax-table nil face (my-face-spc-at-eol))) . -314) nil (#(" " 0 1 (fontified t syntax-table nil face (my-face-spc-at-eol))) . -315) nil (#(" " 0 1 (fontified t)) . -186) nil (#(" " 0 1 (fontified t)) . -187) (t 21328 1495 0 0) nil (nil rear-nonsticky nil 314 . 315) (nil fontified nil 314 . 315) (nil fontified nil 313 . 314) (nil fontified nil 311 . 313) (nil fontified nil 309 . 311) (nil fontified nil 308 . 309) (nil fontified nil 307 . 308) (nil fontified nil 305 . 307) (nil fontified nil 301 . 305) (nil fontified nil 300 . 301) (nil fontified nil 299 . 300) (nil fontified nil 287 . 299) (nil fontified nil 286 . 287) (nil fontified nil 276 . 286) (nil fontified nil 275 . 276) (nil fontified nil 270 . 275) (nil fontified nil 269 . 270) (nil fontified nil 246 . 269) (nil fontified nil 245 . 246) (nil fontified nil 244 . 245) (nil fontified nil 243 . 244) (nil fontified nil 242 . 243) (nil fontified nil 217 . 242) (nil fontified nil 210 . 217) (nil fontified nil 209 . 210) (nil fontified nil 208 . 209) (nil fontified nil 207 . 208) (nil fontified nil 206 . 207) (nil fontified nil 205 . 206) (nil fontified nil 204 . 205) (nil fontified nil 199 . 204) (nil fontified nil 197 . 199) (nil fontified nil 186 . 197) (186 . 315) nil (183 . 189) nil (nil fontified nil 202 . 203) (nil fontified nil 197 . 202) (197 . 203) nil (#("f" 0 1 (fontified t face font-lock-string-face)) . -197) ((marker . 311) . -1) nil (#("i" 0 1 (fontified t face font-lock-string-face)) . -198) ((marker . 311) . -1) nil (#("e" 0 1 (fontified t face font-lock-string-face)) . -199) ((marker . 311) . -1) nil (#("l" 0 1 (fontified t face font-lock-string-face)) . -200) ((marker . 311) . -1) nil (#("d" 0 1 (fontified t face font-lock-string-face)) . -201) ((marker . 311) . -1) nil (#("s" 0 1 (fontified t face font-lock-string-face)) . -202) ((marker . 311) . -1) nil (#("_" 0 1 (fontified t face font-lock-string-face)) . -203) ((marker . 311) . -1) nil (#("t" 0 1 (fontified t face font-lock-string-face)) . -204) ((marker . 311) . -1) nil (#("o" 0 1 (fontified t face font-lock-string-face)) . -205) ((marker . 311) . -1) nil (#("p" 0 1 (fontified t face font-lock-string-face)) . -206) ((marker . 311) . -1) nil (#("i" 0 1 (fontified t face font-lock-string-face)) . -207) ((marker . 311) . -1) nil (#("c" 0 1 (fontified t face font-lock-string-face)) . -208) ((marker . 311) . -1) nil (#("s" 0 1 (fontified t face font-lock-string-face)) . -209) (t 21328 1483 0 0) ((marker . 311) . -1) nil (#("f" 0 1 (fontified t face font-lock-constant-face)) . -275) nil (#("i" 0 1 (fontified t face font-lock-constant-face)) . -276) nil (#("e" 0 1 (fontified t face font-lock-constant-face)) . -277) nil (#("l" 0 1 (fontified t face font-lock-constant-face)) . -278) nil (#("d" 0 1 (fontified t face font-lock-constant-face)) . -279) nil (#("s" 0 1 (fontified t face font-lock-constant-face)) . -280) nil (#("_" 0 1 (fontified t face font-lock-constant-face)) . -281) (t 21328 1441 0 0) nil (nil rear-nonsticky nil 311 . 312) (nil fontified nil 299 . 312) (299 . 312) nil (#("t" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -299) nil (#("a" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -300) nil (#("g" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -301) nil (#("s" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -302) nil (#("_" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -303) nil (#("v" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -304) nil (#("i" 0 1 (fontified t syntax-table nil face font-lock-constant-face)) . -305) (t 21328 1439 0 0) nil undo-tree-canary))
